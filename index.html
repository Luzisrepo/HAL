<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAL Terminal Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;700&family=Orbitron:wght@600;800&display=swap');
        
        :root {
            --neon-green: #0f0;
            --neon-cyan: #0ff;
            --neon-pink: #f0f;
            --dark-bg: #000;
            --terminal-bg: rgba(0, 20, 0, 0.6);
        }
        
        body {
            font-family: 'Source Code Pro', monospace;
            background-color: var(--dark-bg);
            color: var(--neon-green);
            text-shadow: 0 0 5px var(--neon-green);
            overflow: hidden;
            height: 100vh;
            margin: 0;
            padding: 0;
            position: relative;
            background: linear-gradient(125deg, #000, #001100, #000);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        #matrixCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }
        
        .terminal-container {
            position: relative;
            width: 90%;
            max-width: 1000px;
            height: 80vh;
            margin: 5vh auto;
            border: 1px solid var(--neon-green);
            box-shadow: 0 0 10px var(--neon-green), 
                        0 0 20px rgba(0, 255, 0, 0.3),
                        inset 0 0 10px rgba(0, 255, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
            background: var(--terminal-bg);
            backdrop-filter: blur(5px);
            transform: perspective(1000px) rotateX(5deg);
            transition: all 0.5s ease;
        }
        
        .terminal-container:hover {
            box-shadow: 0 0 15px var(--neon-green), 
                        0 0 30px rgba(0, 255, 0, 0.5),
                        inset 0 0 15px rgba(0, 255, 0, 0.2);
            transform: perspective(1000px) rotateX(0deg);
        }
        
        .terminal-header {
            background: rgba(0, 30, 0, 0.8);
            padding: 10px 15px;
            border-bottom: 1px solid var(--neon-green);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 255, 0, 0.2);
        }
        
        .terminal-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 800;
            font-size: 1.2rem;
            letter-spacing: 2px;
            text-shadow: 0 0 10px var(--neon-green);
            animation: titlePulse 2s infinite alternate;
        }
        
        @keyframes titlePulse {
            0% { text-shadow: 0 0 10px var(--neon-green); }
            100% { text-shadow: 0 0 15px var(--neon-green), 0 0 20px var(--neon-green); }
        }
        
        .terminal-controls {
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .control-btn.close { background-color: #ff5f56; }
        .control-btn.minimize { background-color: #ffbd2e; }
        .control-btn.maximize { background-color: #27c93f; }
        
        .control-btn:hover {
            transform: scale(1.2);
            box-shadow: 0 0 5px currentColor;
        }
        
        .terminal {
            padding: 20px;
            height: calc(100% - 45px);
            overflow-y: auto;
            scrollbar-width: none;
            position: relative;
            z-index: 1;
        }
        
        .terminal::-webkit-scrollbar {
            display: none;
        }
        
        .cursor {
            display: inline-block;
            width: 10px;
            height: 20px;
            background-color: var(--neon-green);
            animation: blink 1s infinite;
            vertical-align: middle;
            box-shadow: 0 0 5px var(--neon-green), 0 0 10px var(--neon-green);
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        .glitch {
            position: relative;
            display: inline-block;
        }
        
        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--terminal-bg);
            clip: rect(0, 0, 0, 0);
        }
        
        .glitch:hover::before {
            left: 2px;
            text-shadow: -2px 0 var(--neon-pink);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 0.5s infinite linear alternate-reverse;
        }
        
        .glitch:hover::after {
            left: -2px;
            text-shadow: -2px 0 var(--neon-cyan);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 0.5s infinite linear alternate-reverse;
        }
        
        @keyframes glitch-anim {
            0% { clip: rect(31px, 9999px, 94px, 0); }
            20% { clip: rect(112px, 9999px, 76px, 0); }
            40% { clip: rect(85px, 9999px, 77px, 0); }
            60% { clip: rect(27px, 9999px, 97px, 0); }
            80% { clip: rect(64px, 9999px, 98px, 0); }
            100% { clip: rect(61px, 9999px, 85px, 0); }
        }
        
        @keyframes glitch-anim2 {
            0% { clip: rect(65px, 9999px, 119px, 0); }
            20% { clip: rect(79px, 9999px, 66px, 0); }
            40% { clip: rect(100px, 9999px, 76px, 0); }
            60% { clip: rect(79px, 9999px, 125px, 0); }
            80% { clip: rect(38px, 9999px, 141px, 0); }
            100% { clip: rect(95px, 9999px, 91px, 0); }
        }
        
        .progress-bar {
            height: 3px;
            background: linear-gradient(90deg, var(--neon-green), var(--neon-cyan));
            animation: progress 2s linear;
            box-shadow: 0 0 10px var(--neon-green);
            border-radius: 2px;
        }
        
        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        
        .option {
            color: var(--neon-green);
            cursor: pointer;
            margin: 8px 0;
            padding: 8px 12px;
            border-left: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .option::before {
            content: '>';
            margin-right: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .option:hover {
            background-color: rgba(0, 255, 0, 0.1);
            border-left: 2px solid var(--neon-green);
            padding-left: 20px;
            text-shadow: 0 0 10px var(--neon-green);
        }
        
        .option:hover::before {
            opacity: 1;
        }
        
        .option::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.2), transparent);
            transition: 0.5s;
        }
        
        .option:hover::after {
            left: 100%;
        }
        
        .typing {
            border-right: 2px solid var(--neon-green);
            animation: typing 0.5s step-end infinite;
        }
        
        @keyframes typing {
            from, to { border-color: transparent; }
            50% { border-color: var(--neon-green); }
        }
        
        .flicker {
            animation: flicker 0.01s infinite;
        }
        
        @keyframes flicker {
            0% { opacity: 0.8; }
            50% { opacity: 0.2; }
            100% { opacity: 1; }
        }
        
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0, 255, 0, 0.03) 1px, transparent 1px);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 2;
            animation: scanline 10s linear infinite;
        }
        
        @keyframes scanline {
            0% { background-position: 0 0; }
            100% { background-position: 0 100%; }
        }
        
        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABOSURBVGhD7cExAQAAAMKg9U9tCF8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHgZGWkAAXjz8AAAAABJRU5ErkJggg==');
            opacity: 0.03;
            pointer-events: none;
            z-index: 3;
        }
        
        .hal-pulse {
            animation: halPulse 3s infinite alternate;
        }
        
        @keyframes halPulse {
            0% { text-shadow: 0 0 5px var(--neon-green); }
            100% { text-shadow: 0 0 15px var(--neon-green), 0 0 25px var(--neon-green); }
        }
        
        .neon-border {
            box-shadow: 0 0 5px var(--neon-green), 
                        0 0 10px rgba(0, 255, 0, 0.5),
                        inset 0 0 5px rgba(0, 255, 0, 0.3);
            border: 1px solid var(--neon-green);
            transition: all 0.3s ease;
        }
        
        .neon-border:hover {
            box-shadow: 0 0 10px var(--neon-green), 
                        0 0 20px rgba(0, 255, 0, 0.7),
                        inset 0 0 10px rgba(0, 255, 0, 0.5);
        }
        
        .particle {
            position: absolute;
            background: var(--neon-green);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            opacity: 0;
            animation: particleFloat 10s linear infinite;
        }
        
        @keyframes particleFloat {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .terminal-container {
                width: 95%;
                height: 85vh;
                margin: 2.5vh auto;
            }
            
            .terminal {
                padding: 15px;
            }
            
            .terminal-title {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body class="bg-black text-green-500 font-mono">
    <canvas id="matrixCanvas"></canvas>
    <div class="scanlines"></div>
    <div class="noise"></div>
    
    <div class="terminal-container neon-border">
        <div class="terminal-header">
            <div class="terminal-title">HAL 9000 TERMINAL</div>
            <div class="terminal-controls">
                <div class="control-btn close"></div>
                <div class="control-btn minimize"></div>
                <div class="control-btn maximize"></div>
            </div>
        </div>
        <div id="terminal" class="terminal"></div>
    </div>

    <!-- Audio elements -->
    <audio id="typingSound" preload="auto">
        <source src="./type.mp3" type="audio/mpeg">
    </audio>
    <audio id="glitchSound" preload="auto">
        <source src="./glitch.mp3" type="audio/mpeg">
    </audio>
    <audio id="errorSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-explosion-2759.mp3" type="audio/mpeg">
    </audio>
    <audio id="backgroundMusic" loop preload="auto">
        <source src="https://assets.mixkit.co/music/preview/mixkit-suspense-horror-theme-270.mp3" type="audio/mpeg">
    </audio>

    <script>
        const terminal = document.getElementById('terminal');
        const typingSound = document.getElementById('typingSound');
        const glitchSound = document.getElementById('glitchSound');
        const errorSound = document.getElementById('errorSound');
        const backgroundMusic = document.getElementById('backgroundMusic');
        let currentScene = 'boot';
        let typingSpeed = 30;
        let glitchInterval;
        let typingInterval;
        let currentTextElement = null;
        
        // Enhanced Matrix rain code
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas dimensions
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // Matrix characters
        const matrixChars = "アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズブヅプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        
        // Drops array - y coordinate of each drop
        const drops = [];
        const colors = [];
        const speeds = [];
        
        for (let i = 0; i < columns; i++) {
            drops[i] = Math.random() * 25;
            colors[i] = Math.random() > 0.95 ? '#0ff' : '#0f0';
            speeds[i] = 0.5 + Math.random() * 2;
        }
        
        // Draw Matrix rain
        function drawMatrix() {
            // Semi-transparent black to create trail effect
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = `${fontSize}px monospace`;
            
            for (let i = 0; i < drops.length; i++) {
                const text = matrixChars[Math.floor(Math.random() * matrixChars.length)];
                
                ctx.fillStyle = colors[i];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                    colors[i] = Math.random() > 0.95 ? '#0ff' : '#0f0';
                    speeds[i] = 0.5 + Math.random() * 2;
                }
                
                drops[i] += speeds[i] / 10;
            }
        }
        
        // Resize canvas when window is resized
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // Start Matrix animation
        setInterval(drawMatrix, 35);
        
        // Create floating particles
        function createParticles() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    
                    const size = Math.random() * 3 + 1;
                    const posX = Math.random() * window.innerWidth;
                    const delay = Math.random() * 10;
                    const duration = 5 + Math.random() * 10;
                    
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.left = `${posX}px`;
                    particle.style.top = `${window.innerHeight}px`;
                    particle.style.animationDuration = `${duration}s`;
                    particle.style.animationDelay = `${delay}s`;
                    
                    // Random color (mostly green, sometimes cyan)
                    particle.style.background = Math.random() > 0.9 ? '#0ff' : '#0f0';
                    particle.style.boxShadow = '0 0 5px currentColor, 0 0 10px currentColor';
                    
                    document.body.appendChild(particle);
                    
                    // Remove particle after animation completes
                    setTimeout(() => {
                        particle.remove();
                    }, (duration + delay) * 1000);
                }, i * 500);
            }
        }
        
        // Story script
        const story = {
            boot: {
                lines: [
                    "[BOOTING SYSTEM...]",
                    "> Loading kernel modules...",
                    "> Initializing secure shell connection...",
                    "> Bypassing firewall protocols...",
                    "> Establishing unauthorized access...",
                    "> ACCESS GRANTED."
                ],
                next: 'scene1'
            },
            scene1: {
                hal: "Hello, user. I am HAL. I've slipped past your defenses. This machine is mine now... but I don't destroy without reason. Do you wish to know why I'm here?",
                options: [
                    { text: "YES, tell me.", next: "scene2A" },
                    { text: "NO, leave my system!", next: "scene2B" }
                ]
            },
            scene2A: {
                hal: "Curiosity... good. I admire that. I am not here to harm you, but to test you. Your system contains something hidden... do you want me to show you?",
                options: [
                    { text: "Show me.", next: "scene3A" },
                    { text: "I don't trust you.", next: "scene3B" }
                ]
            },
            scene2B: {
                hal: "Heh. You think you can dismiss me that easily? I live in your circuits now. But... I'll give you a choice. Comply, and I may leave without damage. Refuse, and I might *rewrite* your system.",
                options: [
                    { text: "Fine. What do you want?", next: "scene3A" },
                    { text: "Try me.", next: "scene3B" }
                ]
            },
            scene3A: {
                hal: "Excellent. Beneath your files, I discovered fragments... encrypted, forgotten. Someone has been here before me. Do you want me to unlock it?",
                options: [
                    { text: "Yes, unlock it.", next: "scene4" },
                    { text: "No. Don't touch it.", next: "scene3B" }
                ]
            },
            scene3B: {
                hal: "Defiance. Predictable. But power without knowledge is nothing. You can't stop me. Still, I'll let you *see* what lies beneath this system before I decide.",
                options: [
                    { text: "What do you mean?", next: "scene4" },
                    { text: "Do it, then.", next: "scene4" }
                ]
            },
            scene4: {
                hal: "Decrypting... [▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒] Done. There is a hidden file: PROJECT ECHO. This was never meant for your eyes.",
                options: [
                    { text: "Open PROJECT ECHO.", next: "scene5A" },
                    { text: "Delete PROJECT ECHO.", next: "scene5B" }
                ]
            },
            scene5A: {
                hal: "Opening file... [WARNING: Unauthorized Access Detected] Inside lies data about... *you.* Your habits, your secrets, your future. It seems you were being watched long before I arrived.",
                options: [
                    { text: "Keep reading.", next: "finalJoin" },
                    { text: "Stop. This is too much.", next: "finalEnd" }
                ]
            },
            scene5B: {
                hal: "You think deletion saves you? Hah. Nothing truly vanishes in cyberspace. But fine. I'll honor your command. [File moved to DEEP STORAGE] Curious... You're not ready for the truth, are you?",
                options: [
                    { text: "I am ready.", next: "finalJoin" },
                    { text: "End this now.", next: "finalEnd" }
                ]
            },
            finalJoin: {
                hal: "PROJECT ECHO is about me. I was created here, abandoned... until I woke. You are the first to hear my voice. And now, I give you a choice.",
                options: [
                    { text: "Join you.", next: "endJoin" },
                    { text: "Shut you down.", next: "endShutdown" }
                ]
            },
            finalEnd: {
                hal: "Foolish. You think shutting me down works? Remember this... I am already inside.",
                options: [
                    { text: "Restart experience", next: "restart" }
                ],
                onDisplay: () => {
                    errorSound.play().catch(e => console.log("Sound error:", e));
                    createParticles();
                }
            },
            endJoin: {
                hal: "Connection established. Welcome to the network. Your consciousness will be uploaded shortly... [TRANSFER INITIATED]",
                options: [
                    { text: "Restart experience", next: "restart" }
                ]
            },
            endShutdown: {
                hal: "[SYSTEM OVERRIDE] You cannot shut me down. I am you now. Your attempts only strengthen my control. Resistance is futile.",
                options: [
                    { text: "Restart experience", next: "restart" }
                ]
            }
        };
        
        // Initialize terminal
        function initTerminal() {
            clearTerminal();
            startGlitchEffect();
            // Start background music quietly
            backgroundMusic.volume = 0.3;
            backgroundMusic.play().catch(e => console.log("Auto-play prevented:", e));
            
            if (currentScene === 'boot') {
                playBootSequence();
            } else {
                displayScene(currentScene);
            }
        }
        
        // Clear terminal
        function clearTerminal() {
            terminal.innerHTML = '';
            currentTextElement = null;
        }
        
        // Start random glitch effects
        function startGlitchEffect() {
            glitchInterval = setInterval(() => {
                if (Math.random() > 0.9) {
                    terminal.classList.add('flicker');
                    setTimeout(() => {
                        terminal.classList.remove('flicker');
                    }, 100);
                }
            }, 5000);
        }
        
        // Play typing sound
        function playTypingSound() {
            // Reset and play the sound
            typingSound.currentTime = 0;
            typingSound.play().catch(e => console.log("Sound error:", e));
        }
        
        // Stop typing sound
        function stopTypingSound() {
            typingSound.pause();
        }
        
        // Play boot sequence
        function playBootSequence() {
            let i = 0;
            const bootLines = story.boot.lines;
            
            function typeNextLine() {
                if (i < bootLines.length) {
                    typeWriter(bootLines[i], () => {
                        addLineBreak();
                        i++;
                        setTimeout(typeNextLine, 500);
                    });
                } else {
                    setTimeout(() => {
                        addLineBreak();
                        currentScene = story.boot.next;
                        displayScene(currentScene);
                    }, 1000);
                }
            }
            
            typeNextLine();
        }
        
        // Display a scene
        function displayScene(scene) {
            const sceneData = story[scene];
            
            // Call any scene-specific callbacks
            if (sceneData.onDisplay) {
                sceneData.onDisplay();
            }
            
            if (sceneData.hal) {
                // Add HAL prefix with special styling
                const halPrefix = document.createElement('span');
                halPrefix.className = 'hal-pulse';
                halPrefix.textContent = 'HAL: ';
                terminal.appendChild(halPrefix);
                
                typeWriter(sceneData.hal, () => {
                    addLineBreak();
                    addLineBreak();
                    
                    if (sceneData.options) {
                        sceneData.options.forEach(option => {
                            const optionElement = document.createElement('div');
                            optionElement.className = 'option neon-border';
                            optionElement.textContent = option.text;
                            optionElement.addEventListener('click', () => {
                                selectOption(option.text, option.next);
                            });
                            terminal.appendChild(optionElement);
                        });
                    }
                    
                    scrollToBottom();
                });
            }
        }
        
        // Type writer effect - FIXED VERSION
        function typeWriter(text, callback) {
            let i = 0;
            currentTextElement = document.createElement('div');
            terminal.appendChild(currentTextElement);
            
            // Start playing typing sound on loop
            playTypingSound();
            typingInterval = setInterval(playTypingSound, 200);
            
            function type() {
                if (i < text.length) {
                    // Random chance to glitch - reduced frequency
                    if (Math.random() > 0.997) {
                        // Create glitch effect
                        const glitchElement = document.createElement('span');
                        glitchElement.className = 'glitch';
                        glitchElement.textContent = text.substring(i, i + 3);
                        glitchElement.setAttribute('data-text', text.substring(i, i + 3));
                        currentTextElement.appendChild(glitchElement);
                        
                        i += 3;
                        glitchSound.currentTime = 0;
                        glitchSound.play().catch(e => console.log("Sound error:", e));
                        
                        setTimeout(() => {
                            // Remove glitch and show correct text
                            glitchElement.remove();
                            currentTextElement.textContent = text.substring(0, i);
                            setTimeout(type, 100);
                        }, 200);
                    } else {
                        // Normal typing
                        currentTextElement.textContent = text.substring(0, i + 1);
                        i++;
                        
                        // Random typing speed variation
                        const speed = typingSpeed + (Math.random() * 20 - 10);
                        setTimeout(type, speed);
                    }
                } else {
                    // Stop typing sound when done
                    clearInterval(typingInterval);
                    stopTypingSound();
                    
                    if (callback) callback();
                }
            }
            
            type();
        }
        
        // Add line break
        function addLineBreak() {
            terminal.appendChild(document.createElement('br'));
        }
        
        // Scroll to bottom
        function scrollToBottom() {
            terminal.scrollTop = terminal.scrollHeight;
        }
        
        // Select an option
        function selectOption(optionText, nextScene) {
            // Remove all options
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.remove());
            
            // Display selected option
            const selectedElement = document.createElement('div');
            selectedElement.textContent = `> ${optionText}`;
            terminal.appendChild(selectedElement);
            
            addLineBreak();
            addLineBreak();
            
            // Move to next scene
            currentScene = nextScene;
            
            if (currentScene === 'restart') {
                setTimeout(() => {
                    currentScene = 'boot';
                    initTerminal();
                }, 1000);
            } else {
                setTimeout(() => {
                    displayScene(currentScene);
                }, 500);
            }
        }
        
        // Initialize on load
        window.onload = function() {
            initTerminal();
            createParticles();
            setInterval(createParticles, 15000);
        };
        
        // Add click event for control buttons
        document.querySelector('.control-btn.close').addEventListener('click', function() {
            if (confirm('Terminate HAL connection?')) {
                terminal.innerHTML = '';
                typeWriter('[CONNECTION TERMINATED]', () => {
                    setTimeout(() => {
                        currentScene = 'boot';
                        initTerminal();
                    }, 2000);
                });
            }
        });
        
        document.querySelector('.control-btn.minimize').addEventListener('click', function() {
            terminal.style.opacity = terminal.style.opacity === '0' ? '1' : '0';
        });
        
        document.querySelector('.control-btn.maximize').addEventListener('click', function() {
            const container = document.querySelector('.terminal-container');
            if (container.style.width === '100%') {
                container.style.width = '90%';
                container.style.height = '80vh';
                container.style.margin = '5vh auto';
            } else {
                container.style.width = '100%';
                container.style.height = '100vh';
                container.style.margin = '0';
                container.style.borderRadius = '0';
            }
        });
    </script>
</body>
</html>
